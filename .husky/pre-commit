#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# ã‚³ãƒŸãƒƒãƒˆå‰ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
echo "ğŸ§ª Running tests before commit..."
npm run test:ci

# ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ãŸå ´åˆã¯ã‚³ãƒŸãƒƒãƒˆã‚’ä¸­æ­¢
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed. Commit aborted."
  exit 1
fi

# ã‚³ãƒŸãƒƒãƒˆå‰ã®lintãƒã‚§ãƒƒã‚¯
echo "ğŸ” Running lint check before commit..."
npm run lint

# lintãŒå¤±æ•—ã—ãŸå ´åˆã¯ã‚³ãƒŸãƒƒãƒˆã‚’ä¸­æ­¢
if [ $? -ne 0 ]; then
  echo "âŒ Lint check failed. Commit aborted."
  exit 1
fi

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯
echo "ğŸ¨ Running format check before commit..."
npm run format:check

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒå¤±æ•—ã—ãŸå ´åˆã¯ã‚³ãƒŸãƒƒãƒˆã‚’ä¸­æ­¢
if [ $? -ne 0 ]; then
  echo "âŒ Format check failed. Commit aborted."
  exit 1
fi

echo "âœ… All checks passed. Proceeding with commit..."
